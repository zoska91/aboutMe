{"version":3,"sources":["src/js/main.js"],"names":["titlesButtons","document","querySelectorAll","getData","id","querySelector","classList","add","addEventListener","remove","value","fetch","then","resp","json","console","log","textContent","name","src","image","medium","rating","average","premiered","status","_links","nextepisode","URLNextEp","href","season","number","airdate","more","link","url","innerHTML","URLPrevEp","previousepisode","forEach","btn","getAttribute","deleteSeatchList","list","hasChildNodes","removeChild","firstChild","getTitle","container","el","li","createElement","title","show","premier","country","network","code","setAttribute","appendChild","e","preventDefault"],"mappings":"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","file":"main.d968c638.js","sourceRoot":"..","sourcesContent":["import \"../css/style.sass\";\r\n\r\nconst titlesButtons = [...document.querySelectorAll(\".titleButton\")];\r\n\r\n// pobranie danych z API\r\nconst getData = id => {\r\n  // otwierdzanie i zamykanie \"widoków\"\r\n  document.querySelector(\".aboutSeries\").classList.add(\"active\");\r\n  document.querySelector(\".wrapper\").classList.add(\"off\");\r\n\r\n  document.querySelector(\".back\").addEventListener(\"click\", () => {\r\n    document.querySelector(\".aboutSeries\").classList.remove(\"active\");\r\n    document.querySelector(\".wrapper\").classList.remove(\"off\");\r\n    document.querySelector(\"input\").value = \"\";\r\n    document.querySelector(\".search-list\").classList.remove(\"on\");\r\n  });\r\n\r\n  fetch(`http://api.tvmaze.com/shows/${id}`)\r\n    .then(resp => resp.json())\r\n    .then(resp => {\r\n      console.log(resp);\r\n\r\n      // pobranie tytuly\r\n      document.querySelector(\".title strong\").textContent = resp.name;\r\n      // dodaje miniaturkę (zdjęcie) serialu\r\n      document.querySelector(\".tamb-s\").src = resp.image.medium;\r\n      // dodaje średnią ocenę\r\n      document.querySelector(\".avg strong\").textContent = resp.rating.average;\r\n      // pobranie średniej oceny\r\n      document.querySelector(\".premiered strong\").textContent = resp.premiered;\r\n\r\n      // jeśli serial jest zakończony wyświetl \"status: ended\". jeśli nie podaj datę następnego odcinka lub jeśli nie jest znana daj: UNKNOWN\r\n      if (resp.status === \"Ended\") {\r\n        document.querySelector(\".nextEp\").textContent = \"Status: Ended\";\r\n      } else {\r\n        // URL następnego odcinka\r\n        if (resp._links.nextepisode) {\r\n          const URLNextEp = resp._links.nextepisode.href;\r\n\r\n          fetch(`${URLNextEp}`)\r\n            .then(resp => resp.json())\r\n            .then(resp => {\r\n              // pobranie daty ostatniego odcinka\r\n              document.querySelector(\".nextEp strong\").textContent = `[S${\r\n                resp.season\r\n              }E${resp.number}] ${resp.airdate}`;\r\n              // pobranie daty linku do opisu ostatniego odcinka\r\n              const more = \"read more...\";\r\n              const link = more.link(resp.url);\r\n              document.querySelector(\".link-next\").innerHTML = link;\r\n            });\r\n        } else {\r\n          document.querySelector(\".nextEp strong\").textContent = \"UNKNOWN\";\r\n        }\r\n      }\r\n\r\n      // URL poprzedniego odcinka\r\n\r\n      const URLPrevEp = resp._links.previousepisode.href;\r\n      // na podstawie URL pobiera dane poprzedniego odcinka\r\n\r\n      fetch(`${URLPrevEp}`)\r\n        .then(resp => resp.json())\r\n        .then(resp => {\r\n          // pobranie daty ostatniego odcinka\r\n          document.querySelector(\".prevEp strong\").textContent = `[S${\r\n            resp.season\r\n          }E${resp.number}] ${resp.airdate}`;\r\n          // pobranie daty linku do opisu ostatniego odcinka\r\n          const more = \"read more...\";\r\n          const link = more.link(resp.url);\r\n          document.querySelector(\".link-prev\").innerHTML = link;\r\n        });\r\n    });\r\n};\r\n\r\n// pobranie serialu z przycisku\r\ntitlesButtons.forEach(btn => {\r\n  btn.addEventListener(\"click\", () => {\r\n    const id = btn.getAttribute(\"data-id\");\r\n    console.log(id);\r\n    getData(id);\r\n  });\r\n});\r\n\r\n// skasowanie elementów listy search\r\n\r\nconst deleteSeatchList = () => {\r\n  const list = document.querySelector(\".search-list ul\");\r\n  while (list.hasChildNodes()) {\r\n    list.removeChild(list.firstChild);\r\n  }\r\n};\r\n\r\n// znalezienie id serialu\r\n\r\nconst getTitle = value => {\r\n  console.log(value);\r\n  document.querySelector(\".search-list\").classList.add(\"on\");\r\n\r\n  fetch(`http://api.tvmaze.com/search/shows?q=${value}`)\r\n    .then(resp => resp.json())\r\n    .then(resp => {\r\n      console.log(resp);\r\n      const container = document.querySelector(\".search-list ul\");\r\n\r\n      const list = resp;\r\n      list.forEach(el => {\r\n        const li = document.createElement(\"li\");\r\n        const title = el.show.name;\r\n        const premier = el.show.premiered;\r\n        let country = \"\";\r\n\r\n        if (el.show.network) {\r\n          country = el.show.network.country.code;\r\n        }\r\n        li.setAttribute(\"data-id\", el.show.id);\r\n        li.textContent = `${title} - ${premier}  ${country}`;\r\n        container.appendChild(li);\r\n\r\n        li.addEventListener(\"click\", () => {\r\n          const id = el.show.id;\r\n          getData(id);\r\n          deleteSeatchList();\r\n        });\r\n      });\r\n    });\r\n};\r\n\r\n// pobieranie serialu z input\r\n\r\ndocument.querySelector(\"form\").addEventListener(\"submit\", e => {\r\n  e.preventDefault();\r\n  const value = document.querySelector(\"input\").value;\r\n  getTitle(value);\r\n});\r\n"]}